define(["common/global","lib/jquery/jquery.blockui"],function(A){var B=function(I){$.blockUI.defaults.fadeIn=100;$.blockUI.defaults.fadeOut=100;var C="J_registerMod";var E=window.location.href;var G=E.indexOf("code")==-1&&E.indexOf("openid")==-1&&E.indexOf("asbindop.do")==-1;var H="";var D=isAbleskyDomain?HTTP_SERVER:"";if(G){H='<div class="third-party-login"  style="margin-top: 35px;"></div>'}var F=["<h3>创建属于您的帐号:</h3>",'<a class="bluebtn30 registerenter" href="'+HTTP_SERVER+"collegeRedirect.do?action=toRegister&fromurl="+encodeURIComponent(window.location.href)+'">','<span class="bluebtn30_text">院校学生注册入口</span>','</a><a href="'+HTTP_SERVER+"collegeRedirect.do?action=toRegister&fromurl="+encodeURIComponent(window.location.href)+'" class="register-enter"></a>','<p class="shortinfo">现在就创建一个能力帐户, 从现在开始尽享互联网学习的快乐, 同时与大家一起分享您的知识与经验!</p>','<form id="J_registerForm" method="post" action="register.do"><fieldset>','<dl class="items">',"<dt>用户名：</dt>",'<dd class="field-wrapper">','<input type="text" autocomplete="off" maxlength="20" tabindex="0" class="field" id="J_enterUsername" name="username" />','<label for="J_enterUsername" class="empty-text">输入用户名</label>',"</dd>",'<dd class="invalid-text"></dd>',"</dl>",'<dl class="items" style="margin-right: 0;">',"<dt>邮箱：</dt>",'<dd class="field-wrapper">','<input type="text" autocomplete="off" maxlength="60" tabindex="0" class="field" id="J_enterEmail" name="email" />','<label for="J_enterEmail" class="empty-text">填写电子邮箱</label>',"</dd>",'<dd class="invalid-text"></dd>',"</dl>",'<dl class="items">',"<dt>设置密码：</dt>",'<dd class="field-wrapper">','<input type="password" autocomplete="off" maxlength="20" tabindex="0" class="field" id="J_enterPassword" name="password" oncopy="return false;" onpaste="return false;" />','<label for="J_enterPassword" class="empty-text">设置密码</label>',"</dd>",'<dd class="invalid-text"></dd>',"</dl>",'<dl class="items" style="margin-right: 0;">',"<dt>确认密码：</dt>",'<dd class="field-wrapper">','<input type="password" autocomplete="off" maxlength="20" tabindex="0" class="field" id="J_confirmPassword" name="password2" oncopy="return false;" onpaste="return false;" />','<label for="J_confirmPassword" class="empty-text">确认密码</label>',"</dd>",'<dd class="invalid-text"></dd>',"</dl>",'<dl class="items">',"<dt>验证码：</dt>",'<dd class="field-wrapper">','<input type="text" autocomplete="off" maxlength="4" tabindex="0" class="field" id="J_verifycode" name="verifycode" />','<label for="J_verifycode" class="empty-text">输入验证码</label>','<a id="J_changeVerfiycode" class="verifycode-change" title="看不清，点击换一张" tabindex="-1" href="javascript:;" style="display: none;">','<img id="J_verifycodeImg" class="verifycode-img" src="'+D+'accountRedirect.do?action=getVerifyCode" />',"</a>","</dd>",'<dd class="invalid-text"></dd>',"</dl>",'<p style="clear: both;"><label for="J_agreeContract" class="contract-label">','<input type="checkbox" checked="checked" id="J_agreeContract" class="agree-contract" />','我已阅读并同意<a href="'+HTTP_SERVER+'commonRedirect.do?action=toPrivatePolicy" target="_blank">《能力天空服务条款》</a>',"</label></p>",'<div class="clearfix">','<a id="J_submitReg" class="register-btn" href="javascript:;">立即注册</a>','<a id="J_unBlockUI" class="unblock-btn" href="javascript:;">待会再说</a>',"</div>","</fieldset><form>",H];$.blockUI({message:'<div id="'+C+'" class="overlay-register module-register"><span style="text-align: center;"><img src="'+IMG_PATH+'/market/common/loading-32-32.gif" /></span></div>',overlayCSS:{backgroundColor:"#000",opacity:0.9,cursor:"default",zIndex:10000},css:{position:"fixed",top:"16%",left:"50%",marginLeft:"-355px",border:"none",textAlign:"left",backgroundColor:"none",cursor:"auto",zIndex:10010},fadeOut:0});require(["common/module-register"],function(L){$("#"+C).html(F.join(""));if(isAbleskyDomain&&G){require(["account/widget-3partylogin"],function(O){O.init({type:"big",labelIconSpacing:"20",iconSpacing:"10"})})}var M=A.queryString("pt"),N=parseInt(A.queryString("courseId")),K=parseInt(A.queryString("pcid"));isNaN(N)&&(N=0);isNaN(K)&&(K=0);var J={isIndexPage:false};if(M=="trial"&&N){J.callback=function(){window.location.href="accountLoginRedirect.do?action=toFromTrialSuccess&pt=trial&courseId="+(K||N)}}if(I==true){L.init({callback:function(O){window.location.href=AD_SERVER+"index.do"}})}else{L.init(J)}$("#J_enterUsername:input").focus();$("#J_unBlockUI").click(function(O){O.preventDefault();$.unblockUI()})})};return{init:B}}); 